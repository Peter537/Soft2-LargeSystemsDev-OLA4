{
  "Serilog": {
    "Using": [
      "Serilog.Sinks.Console",
      "Serilog.Sinks.File",
      "Serilog.Formatting.Elasticsearch",
      "Serilog.Expressions"
    ],
    "MinimumLevel": "Information",
    "Enrich": [ "FromLogContext" ],
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "outputTemplate": "{Timestamp:HH:mm:ss} [{Level:u3}] ({correlation_id}) {Message:lj}{NewLine}{Exception}"
        }
      },
      {
        "Name": "File",
        "Args": {
          "path": "logs/system-.log",
          "rollingInterval": "Day",
          "retainedFileCountLimit": 14,
          "shared": true,
          "outputTemplate": "{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz} [{Level:u3}] ({correlation_id}) {Message:lj}{NewLine}{Exception}"
        }
      },

      // ----- AUDIT sub-logger (JSON file) -----
      {
        "Name": "Logger",
        "Args": {
          "configureLogger": {
            "WriteTo": [
              {
                "Name": "File",
                "Args": {
                  "path": "logs/audit-.log",
                  "rollingInterval": "Day",
                  "retainedFileCountLimit": 90,
                  "shared": true,
                  "formatter": "Serilog.Formatting.Elasticsearch.ElasticsearchJsonFormatter, Serilog.Formatting.Elasticsearch",
                  "formatterArgs": { "renderMessage": true }
                }
              }
            ]
          },
          "filter": [
            {
              "Name": "ByIncludingOnly",
              "Args": { "expression": "log_type = 'audit'" }
            }
          ]
        }
      }
    ]
  }
}
